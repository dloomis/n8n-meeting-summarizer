{
  "name": "Meeting Summarizer",
  "nodes": [
    {
      "parameters": {
        "triggerOn": "folder",
        "path": "/data/tmp",
        "events": [
          "add",
          "change"
        ],
        "options": {
          "awaitWriteFinish": true
        }
      },
      "type": "n8n-nodes-base.localFileTrigger",
      "typeVersion": 1,
      "position": [
        832,
        -256
      ],
      "id": "ed44244a-1c52-4c31-b370-d7de53c82d08",
      "name": "Local File Trigger"
    },
    {
      "parameters": {
        "fileSelector": "={{ $json.path }}",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        1056,
        -256
      ],
      "id": "b8672256-b544-4ef8-ada0-fdae0074ae23",
      "name": "Read/Write Files from Disk"
    },
    {
      "parameters": {
        "operation": "text",
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1,
      "position": [
        1280,
        -256
      ],
      "id": "fa51e2c8-fe6f-4c05-81a6-72f5ef0d9acc",
      "name": "Extract from File"
    },
    {
      "parameters": {
        "jsCode": "return items.map(item => {\n    const text = item.json.data || '';\n    const blocks = text.split(/\\n\\n/).filter(b => b.trim());\n    const participants = [...new Set(blocks.map(b => b.split('\\n')[0].trim()).filter(p => p))];\n    const dateRegex = /\\b(\\d{4}-\\d{2}-\\d{2})\\b/g;\n    let extractedDate = text.match(dateRegex) ? text.match(dateRegex)[0] : new Date().toISOString().split('T')[0];\n    return {\n        json: {\n            ...item.json,\n            participants,\n            extractedDate\n        }\n    };\n});"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1504,
        -256
      ],
      "id": "ef1fd92c-1085-4938-a0a4-7dcda639406b",
      "name": "Extract Metadata"
    },
    {
      "parameters": {
        "url": "={{ $json.gitSystemPromptURL }}",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "githubApi",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [
        832,
        0
      ],
      "id": "02c004e3-6bbb-467a-8a6b-72ba495e78ba",
      "name": "Fetch System Prompt"
    },
    {
      "parameters": {
        "operation": "toText",
        "sourceProperty": "text",
        "options": {
          "encoding": "utf8",
          "fileName": "={{ $('Store file info').item.json.filenameNoExt }}.{{ Math.floor(Math.random() * 1000) }}.md"
        }
      },
      "type": "n8n-nodes-base.convertToFile",
      "typeVersion": 1.1,
      "position": [
        832,
        416
      ],
      "id": "264c9f9c-4be3-4ccc-9112-3e3334bef6e5",
      "name": "Convert to File"
    },
    {
      "parameters": {
        "command": "=rm \"{{ $('Store file info').item.json.filenameFullPath }}\"\n"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        1280,
        416
      ],
      "id": "6810b66b-e37f-43d9-a788-b3963fef1cfe",
      "name": "Delete local transcription file"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Here is the transcript to summarize.\nDefault Due Date: {{ $now.plus({days: 7}).toFormat('yyyy-MM-dd') }}\nExtracted Participants (hints): {{ $('Store file info').item.json.participantsHint.join(', ') }}\nExtracted Date (hint): {{ $('Store file info').item.json.extractedDate }}\nImportant Participants for Prioritization: {{ $('Store file info').item.json.importantParticipants.join(', ') }}\n\n<transcript>\n{{ $('Extract from File').item.json.data }}\n</transcript>\n\nPlease generate the summary now following the OUTPUT TEMPLATE.",
        "messages": {
          "messageValues": [
            {
              "message": "={{ $json.data }}"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        1056,
        0
      ],
      "id": "49f49a67-cb50-419d-ade4-4146f891c4c7",
      "name": "Summarize Transcript"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "claude-sonnet-4-5-20250929",
          "cachedResultName": "Claude Sonnet 4.5"
        },
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1.3,
      "position": [
        1056,
        240
      ],
      "id": "8207e613-3d15-47a5-bb2f-30e076ad4dcc",
      "name": "Claude Sonnet 4.5"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "qwen/qwen3-30b-a3b-2507",
          "mode": "list",
          "cachedResultName": "qwen/qwen3-30b-a3b-2507"
        },
        "responsesApiEnabled": false,
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        1248,
        240
      ],
      "id": "42742f2e-8935-4317-bbb9-0b31be3271a6",
      "name": "qwen/qwen3-30b-a3b-2507"
    },
    {
      "parameters": {
        "jsCode": "// n8n Code Node - Remove file extension from filename\n// Works with single items or multiple items\n\nreturn items.map(item => {\n    const filename = $('Read/Write Files from Disk').first().json.fileName; // adjust field name as needed\n\n    if (!filename || typeof filename !== 'string') {\n        return item; // return unchanged if no valid filename\n    }\n\n    // Remove the extension (everything after the last dot)\n    // But preserve hidden files like \".gitignore\" or \".env\"\n    const cleanedFilename = filename.replace(/\\.[^/.]+$/, '');\n\n    // Return the item with the new filename (you can name the output field whatever you want)\n    return {\n        json: {\n            ...item.json,\n            filenameNoExt: cleanedFilename,\n            // Optionally keep original:\n            // filename: filename,\n        }\n    };\n});"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1728,
        -256
      ],
      "id": "69555a66-3816-47c5-8dfc-1f8c15d83eb7",
      "name": "Strip file extension"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d92fcf22-31bf-4994-8790-d62e784d7570",
              "name": "filenameNoExt",
              "value": "={{ $json.filenameNoExt }}",
              "type": "string"
            },
            {
              "id": "42add7da-af06-4f83-9f92-2d46c6d9ee72",
              "name": "filenameFullPath",
              "value": "={{ $('Local File Trigger').item.json.path }}",
              "type": "string"
            },
            {
              "id": "e99a29ea-e18c-4864-ba43-38c02ff4147b",
              "name": "gitSystemPromptURL",
              "value": "https://raw.githubusercontent.com/dloomis/n8n-meeting-summarizer/main/system-prompt.md",
              "type": "string"
            },
            {
              "id": "participants-hint-id",
              "name": "participantsHint",
              "value": "={{ $json.participants }}",
              "type": "array"
            },
            {
              "id": "extracted-date-id",
              "name": "extractedDate",
              "value": "={{ $json.extractedDate }}",
              "type": "string"
            },
            {
              "id": "important-participants-id",
              "name": "importantParticipants",
              "value": "=[\"Steve Martin\"]",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1952,
        -256
      ],
      "id": "94ca7dec-7a4d-4d49-9961-907f84f19b42",
      "name": "Store file info"
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "=/data/summaries/{{ $binary.data.fileName }}",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        1056,
        416
      ],
      "id": "0159c8ef-2934-46a9-8cbb-708f24e920eb",
      "name": "Write file to Obsidian"
    }
  ],
  "pinData": {},
  "connections": {
    "Local File Trigger": {
      "main": [
        [
          {
            "node": "Read/Write Files from Disk",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read/Write Files from Disk": {
      "main": [
        [
          {
            "node": "Extract from File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract from File": {
      "main": [
        [
          {
            "node": "Extract Metadata",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract Metadata": {
      "main": [
        [
          {
            "node": "Strip file extension",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fetch System Prompt": {
      "main": [
        [
          {
            "node": "Summarize Transcript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Convert to File": {
      "main": [
        [
          {
            "node": "Write file to Obsidian",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Summarize Transcript": {
      "main": [
        [
          {
            "node": "Convert to File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Claude Sonnet 4.5": {
      "ai_languageModel": [
        [
          {
            "node": "Summarize Transcript",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Strip file extension": {
      "main": [
        [
          {
            "node": "Store file info",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Store file info": {
      "main": [
        [
          {
            "node": "Fetch System Prompt",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Write file to Obsidian": {
      "main": [
        [
          {
            "node": "Delete local transcription file",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "callerPolicy": "workflowsFromSameOwner",
    "availableInMCP": false
  },
  "versionId": "14b83e6b-5739-43ec-abd6-a997bad04c4b",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "fc95f5dcf8564dad8406657e222d807a38320c03e61ffe53bddcf6037399e437"
  },
  "id": "eQXiPWGAUdrJLVEo",
  "tags": []
}