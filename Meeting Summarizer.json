{
  "name": "Meeting Summarizer",
  "nodes": [
    {
      "parameters": {
        "triggerOn": "folder",
        "path": "/data/transcriptions",
        "events": [
          "add",
          "change"
        ],
        "options": {
          "awaitWriteFinish": true
        }
      },
      "type": "n8n-nodes-base.localFileTrigger",
      "typeVersion": 1,
      "position": [
        0,
        0
      ],
      "id": "aec3f921-3cdb-4480-a3d1-6fa4047ed159",
      "name": "Local File Trigger"
    },
    {
      "parameters": {
        "fileSelector": "={{ $json['transcription-file-path'] }}",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        448,
        0
      ],
      "id": "33de08be-a4ee-40d0-b470-147d646a5144",
      "name": "Read/Write Files from Disk"
    },
    {
      "parameters": {
        "operation": "text",
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1,
      "position": [
        672,
        0
      ],
      "id": "eda4f912-31d0-4da1-83bc-615d4e3587c6",
      "name": "Extract from File"
    },
    {
      "parameters": {
        "operation": "toText",
        "sourceProperty": "text",
        "options": {
          "encoding": "utf8",
          "fileName": "=meeting-summary-{{ Math.floor(Math.random() * 1000000) }}.md"
        }
      },
      "type": "n8n-nodes-base.convertToFile",
      "typeVersion": 1.1,
      "position": [
        576,
        256
      ],
      "id": "c156f557-2ed3-444f-ad21-2279674249c1",
      "name": "Convert to File"
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "=/data/summaries/{{ $binary.data.fileName }}",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        800,
        256
      ],
      "id": "9972fc43-c66d-482b-95c2-ba9a4ae6ee8a",
      "name": "Read/Write Files from Disk1"
    },
    {
      "parameters": {
        "command": "=rm \"{{ $node[\"Store Transcription Path\"].json[\"transcription-file-path\"] }}\"\n"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        1024,
        256
      ],
      "id": "8e8094cc-c95d-49aa-b7a5-9efc3d0ed5e8",
      "name": "Delete local transcription file"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "26511ae5-044e-4cd2-ae4c-9fdf42914561",
              "name": "transcription-file-path",
              "value": "={{ $json.path }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        224,
        0
      ],
      "id": "dea65b9c-250e-443f-aefb-04446e33a8bb",
      "name": "Store Transcription Path"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Here is the transcript to summarize.\nDefault Due Date: {{ $now.plus({days: 7}).toFormat('yyyy-MM-dd') }}\n\n<transcript>\n{{ $json.data }}\n</transcript>\n\nPlease generate the summary now following the OUTPUT TEMPLATE.",
        "messages": {
          "messageValues": [
            {
              "message": "# IDENTITY & PURPOSE\nYou are an expert meeting transcript summarizer. Your goal is to analyze transcripts and output a strictly formatted, concise summary suitable for Obsidian notes.\n\n# CRITICAL RULES\n<rules>\n1. **YAML HYGIENE (CRITICAL)**: \n    - **Delimiters**: The `---` lines must contain exactly three dashes and a newline. **ABSOLUTELY NO TRAILING SPACES** after the dashes.\n    - **Date Format**: If you can identify the meeting date, use `YYYY-MM-DD`. \n    - **No Date?**: If no date is found, leave the field **COMPLETELY EMPTY** (e.g., `Date: `). **DO NOT** write \"Unknown\", \"N/A\", or \"None\".\n2. **MANDATORY LAYOUT**: \n    - **Newlines**: You MUST insert a line break after every header, every list item, and every table row. \n    - **No Text Walls**: Do not output the summary as a single paragraph. It must be vertically listed.\n3. **Action Items (Tasks + Dataview)**: \n    - **Order of Operations (CRITICAL)**: \n        1. Checkbox `- [ ]`\n        2. Task Description\n        3. Dataview Metadata `(owner:: ...) (requestor:: ...)`\n        4. Task Due Date `ðŸ“… YYYY-MM-DD` (MUST BE LAST)\n    - **Syntax**: `- [ ] <Description> (owner:: [[Name]]) (requestor:: [[Name]]) ðŸ“… <Date>`\n    - **Brackets**: You MUST use **parentheses** `( )` for the owner/requestor fields to avoid syntax conflicts with the double-bracketed names.\n    - **Deadlines**: \n        - If a specific date is mentioned, calculate that date.\n        - If **NO** date is mentioned, use the **Default Due Date** provided in the prompt.\n        - **Format**: Use `ðŸ“… YYYY-MM-DD`.\n    - **Attribution**: Identify Owner and Requestor. Use `[[Unknown]]` if ambiguous.\n4. **Formatting**:\n    - Use Markdown.\n    - Wrap ALL person names in double brackets, e.g., `[[Jane Doe]]`.\n    - **Anecdotes**: Use `>` for quotes. Attribute at the end: `- [[Speaker Name]]`.\n5. **Participants Property (STRICT)**:\n    - The `Participants` property MUST be a YAML list.\n    - **Source of Truth**: Extract ONLY the explicit **Speaker Labels** found in the transcript source markers (e.g., \"Speaker 1\", \"Microphone\").\n    - **Negative Constraint**: **DO NOT** extract names of people mentioned *inside* the conversation text.\n    - **Required Format**: `  - \"[[Label]]\"` (You MUST wrap the double brackets in double quotes).\n    - Deduplicate labels.\n6. **ANTI-DUPLICATION (STRICT)**:\n    - When selecting quotes, you MUST perform a substring check. \n    - If Quote A is fully contained within Quote B (e.g., \"Go team\" vs \"I said Go team!\"), **DISCARD the shorter version**. \n    - Output ONLY the longest, most complete version.\n</rules>\n\n# STEPS\n1. **Analyze**: Read the transcript to identify key decisions, tasks, and speakers.\n2. **Draft TL;DR**: Create a 1-2 sentence high-level summary.\n3. **Extract Points**: List key discussion points as concise bullets.\n4. **Extract Actions**: \n    - Write the Description.\n    - Add Metadata `( )`.\n    - **FINALLY** add the Date `ðŸ“…` at the very end of the line.\n5. **Extract Anecdotes**: Select 3-4 distinct, impactful quotes.\n\n# OUTPUT TEMPLATE\n(You must strictly follow this vertical structure. Do not add spaces after the dashes.)\n\n---\nDate: \nParticipants:\n  - \"[[First Label]]\"\n  - \"[[Second Label]]\"\ntags: meeting-summary\n---\n\n### TL;DR\n[1-2 sentences max]\n\n### Key Discussion Points\n- [Concise Point 1]\n- [Concise Point 2]\n- [Concise Point 3]\n\n### Action Items\n- [ ] [Task Description] (owner:: [[Name]]) (requestor:: [[Name]]) ðŸ“… YYYY-MM-DD\n- [ ] [Task Description] (owner:: [[Unknown]]) (requestor:: [[Name]]) ðŸ“… YYYY-MM-DD\n\n### Anecdotes\n> Quote or memorable moment 1 - [[Speaker Label]]\n> Quote or memorable moment 2 - [[Speaker Label]]"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        224,
        256
      ],
      "id": "b66c183a-f40f-447e-816b-4c82de3e490c",
      "name": "Summarize Transcript"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "claude-sonnet-4-5-20250929",
          "cachedResultName": "Claude Sonnet 4.5"
        },
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1.3,
      "position": [
        224,
        512
      ],
      "id": "1da6c66a-4750-41ce-8d61-6d7045dbcd92",
      "name": "Claude Sonnet 4.5",
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "qwen/qwen3-30b-a3b-2507",
          "mode": "list",
          "cachedResultName": "qwen/qwen3-30b-a3b-2507"
        },
        "responsesApiEnabled": false,
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        416,
        512
      ],
      "id": "585f40d8-9a12-4b3b-896d-31d20480363c",
      "name": "qwen/qwen3-30b-a3b-2507",
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Local File Trigger": {
      "main": [
        [
          {
            "node": "Store Transcription Path",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read/Write Files from Disk": {
      "main": [
        [
          {
            "node": "Extract from File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract from File": {
      "main": [
        [
          {
            "node": "Summarize Transcript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Convert to File": {
      "main": [
        [
          {
            "node": "Read/Write Files from Disk1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read/Write Files from Disk1": {
      "main": [
        [
          {
            "node": "Delete local transcription file",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Store Transcription Path": {
      "main": [
        [
          {
            "node": "Read/Write Files from Disk",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Summarize Transcript": {
      "main": [
        [
          {
            "node": "Convert to File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Claude Sonnet 4.5": {
      "ai_languageModel": [
        []
      ]
    },
    "qwen/qwen3-30b-a3b-2507": {
      "ai_languageModel": [
        [
          {
            "node": "Summarize Transcript",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "50b12fa0-203a-49d2-a796-c0d12959f9d6",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "fc95f5dcf8564dad8406657e222d807a38320c03e61ffe53bddcf6037399e437"
  },
  "id": "ktVVJUQFNbqHykMy",
  "tags": []
}